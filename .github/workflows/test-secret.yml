      - name: Create pre-prod branch and log in README
        if: github.ref_name == 'Dev' && github.event_name == 'push'
        run: |
          set -e

          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"

          git remote set-url origin "https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}"

          BRANCH_PREPROD="pre-prod"
          SOURCE_BRANCH="Dev"

          # RÃ©cupÃ©rer les derniÃ¨res refs
          git fetch origin

          # VÃ©rifier si la branche prÃ©-prod existe dÃ©jÃ 
          if git ls-remote --heads origin "$BRANCH_PREPROD" | grep "$BRANCH_PREPROD" >/dev/null 2>&1; then
            echo "La branche $BRANCH_PREPROD existe dÃ©jÃ  sur origin, rien Ã  faire."
          else
            echo "La branche $BRANCH_PREPROD n'existe pas, crÃ©ation depuis $SOURCE_BRANCH..."

            # S'assurer qu'on est bien sur Dev et Ã  jour
            git checkout "$SOURCE_BRANCH"
            git pull origin "$SOURCE_BRANCH"

            # CrÃ©er branche prÃ©-prod depuis Dev et pousser
            git checkout -b "$BRANCH_PREPROD"
            git push origin "$BRANCH_PREPROD"
          fi

          # Revenir sur Dev pour mettre Ã  jour le README
          git checkout "$SOURCE_BRANCH"

          DATE=$(date +'%Y-%m-%d %H:%M:%S')
          {
            echo ""
            echo "---"
            echo "**PrÃ©-prod branch crÃ©Ã©e le $DATE**"
          } >> README.md

          git add README.md
          git commit -m "ðŸ§ª Log crÃ©ation branche prÃ©-prod depuis Dev"
          git push origin "$SOURCE_BRANCH"
